(this["webpackJsonpphoto-gallery"]=this["webpackJsonpphoto-gallery"]||[]).push([[0],{124:function(e,t,a){},125:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(22),o=a.n(c),l=a(24),s=a(30),u=a(15),i=function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"EDC Demo App"),r.a.createElement("div",{className:"links"},r.a.createElement(s.b,{to:"/",className:"link"},"Upload"),r.a.createElement(s.b,{to:"/gallery",className:"link"},"View")))},m=a(26),p=a(129),f=a(131),d=a(32),h=a.n(d),E=a(37),b=a(38),g=a.n(b),v=function(e){return{type:"GET_ERRORS",errors:e}},O=function(e){return{type:"LOAD_PHOTOS",photos:e}},y=Object(l.b)((function(e){return{photos:e.photos||[],errors:e.errors||{}}}))((function(e){var t=e.errors,a=e.dispatch,c=Object(n.useState)(null),o=Object(m.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(!1),i=Object(m.a)(u,2),d=i[0],b=i[1],O=Object(n.useState)(null),y=Object(m.a)(O,2),j=y[0],N=y[1];Object(n.useEffect)((function(){N(t)}),[t]),Object(n.useEffect)((function(){N("")}),[]);return r.a.createElement(r.a.Fragment,null,j&&j.upload_error?r.a.createElement("p",{className:"errorMsg centered-message"},j.upload_error):d&&r.a.createElement("p",{className:"successMsg centered-message"},"Photo uploaded successfully."),r.a.createElement(p.a,{onSubmit:function(e){e.preventDefault(),l&&(N(""),a(function(e){return function(){var t=Object(E.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(n=new FormData).append("photo",e),t.next=5,g.a.post("".concat("","/photos"),n,{headers:{"Content-Type":"multipart/form-data"}});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&a(v(t.t0.response.data));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(l)),b(!0))},method:"post",encType:"multipart/form-data",className:"upload-form"},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Choose photo to upload"),r.a.createElement(p.a.Control,{type:"file",name:"photo",onChange:function(e){var t=e.target.files[0];s(t)}})),r.a.createElement(f.a,{variant:"primary",type:"submit",className:"".concat(l?"submit-btn":"disabled submit-btn"),disabled:!l},"Upload")))})),j=function(){return r.a.createElement("div",{className:"home-page"},r.a.createElement(y,null))},N=a(41),_=function(){return r.a.createElement(N.d,{color:"blue",className:"font-small pt-4 mt-4"},r.a.createElement("div",{className:"footer-copyright text-center py-3"},r.a.createElement(N.c,{fluid:!0},"\xa9 ",(new Date).getFullYear()," Copyright: ",r.a.createElement("a",{href:"https://moinak878.github.io"}," moinak878 "))))},w=a(130),S=function(e){var t=e.id;return r.a.createElement(w.a,{className:"photo"},r.a.createElement(w.a.Img,{variant:"top",src:"http://localhost:3300/photos/".concat(t),alt:"Photo"}))},k=Object(l.b)((function(e){return{photos:e.photos||[],errors:e.errors||{}}}))((function(e){var t=e.errors,a=e.photos,c=e.dispatch,o=Object(n.useState)(!1),l=Object(m.a)(o,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){u(!0),c(function(){var e=Object(E.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("".concat("","/photos"));case 3:a=e.sent,t(O(a.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&t(v(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){a.length>0&&u(!1)}),[a]),r.a.createElement("div",{className:"photos-list"},t&&t.get_error&&r.a.createElement("p",{className:"errorMsg centered-message"},t.get_error),s?r.a.createElement("div",{className:"loading-msg centered-message"},"Loading..."):a.map((function(e){return r.a.createElement(S,{key:e._id,id:e._id})})))})),x=function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Page not found"))},D=function(){return r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(i,null),r.a.createElement("div",{className:"main-content"},r.a.createElement(u.c,null,r.a.createElement(u.a,{component:j,path:"/",exact:!0}),r.a.createElement(u.a,{component:k,path:"/gallery"}),r.a.createElement(u.a,{component:x}))),r.a.createElement(_,null)))},T=a(17),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PHOTOS":return t.photos;default:return e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.errors;default:return e}},P=a(66),L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,M=Object(T.e)(Object(T.c)({photos:C,errors:R}),L(Object(T.a)(P.a)));M.subscribe((function(){console.log(M.getState())}));var A=M;a(123),a(124);o.a.render(r.a.createElement(l.a,{store:A},r.a.createElement(D,null)),document.getElementById("root"))},68:function(e,t,a){e.exports=a(125)}},[[68,1,2]]]);
//# sourceMappingURL=main.b6c95d68.chunk.js.map